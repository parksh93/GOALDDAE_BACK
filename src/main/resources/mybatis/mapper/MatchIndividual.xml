<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goalddae.repository.MatchIndividualRepository">
    <update id="createMatchIndividualTable" parameterType="java.lang.String">
        CREATE TABLE ${_parameter} (
                                       id BIGINT AUTO_INCREMENT PRIMARY KEY,
                                       likes BIGINT default 0 NOT NULL,
                                       views BIGINT default 0 NOT NULL,
                                       gender VARCHAR(255) NOT NULL,
                                       minimum BIGINT NOT NULL,
                                       maximum BIGINT NOT NULL,
                                       player_number BIGINT NOT NULL,
                                       recruit_start DATETIME NOT NULL,
                                       recruit_end DATETIME NOT NULL,
                                       manager_id VARCHAR(255) NOT NULL,
                                       users_id BIGINT NOT NULL,
                                       FOREIGN KEY (users_id) REFERENCES users(id),
                                       soccer_field_id BIGINT NOT NULL,
                                       FOREIGN KEY (soccer_field_id) REFERENCES soccer_field(id),
                                       field_reservation_id BIGINT NOT NULL,
                                       FOREIGN KEY (field_reservation_id) REFERENCES field_reservation(id)
        );
    </update>

    <select id="findIndividualMatches" resultType="com.goalddae.dto.match.MatchIndividualDTO" parameterType="map">
        SELECT * FROM ${matchIndividualTable}
        WHERE recruit_start &gt;= #{recruitStart} AND recruit_end &lt;= #{recruitEnd}
    </select>
</mapper>
